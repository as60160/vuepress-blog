(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{423:function(t,e,o){"use strict";o.r(e);var v=o(56),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"_11-生命週期"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_11-生命週期"}},[t._v("#")]),t._v(" 11. 生命週期")]),t._v(" "),o("p",[o("img",{attrs:{src:"https://i.imgur.com/vDihCVx.png",alt:"Vue Lifecycle"}})]),t._v(" "),o("h2",{attrs:{id:"hooks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#hooks"}},[t._v("#")]),t._v(" Hooks")]),t._v(" "),o("ul",[o("li",[t._v("Create\n"),o("ul",[o("li",[t._v("beforeCreated")]),t._v(" "),o("li",[t._v("created")])])]),t._v(" "),o("li",[t._v("Mount\n"),o("ul",[o("li",[t._v("beforeMount")]),t._v(" "),o("li",[t._v("mounted")])])]),t._v(" "),o("li",[t._v("Update\n"),o("ul",[o("li",[t._v("beforeUpdate")]),t._v(" "),o("li",[t._v("updated")])])]),t._v(" "),o("li",[t._v("Destory\n"),o("ul",[o("li",[t._v("beforeDestory")]),t._v(" "),o("li",[t._v("destoryed")])])])]),t._v(" "),o("h2",{attrs:{id:"過程"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#過程"}},[t._v("#")]),t._v(" 過程")]),t._v(" "),o("h3",{attrs:{id:"create"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#create"}},[t._v("#")]),t._v(" Create")]),t._v(" "),o("blockquote",[o("p",[t._v("在記憶體裡面進行運算，還沒有掛在畫面、DOM 上。")])]),t._v(" "),o("ul",[o("li",[t._v("Initial events & lifecycle\n"),o("ul",[o("li",[t._v("Hook: beforeCreate")]),t._v(" "),o("li",[t._v("在這裡可以讀到 Vue，但讀不到裡面的資料 (methods, computed, ...)。")])])]),t._v(" "),o("li",[t._v("Initial injections & reactivity\n"),o("ul",[o("li",[t._v("Hook: created")]),t._v(" "),o("li",[t._v("包含 data, computed, observer 。")]),t._v(" "),o("li",[t._v("到這裡正式完成了 created 的動作。")])])])]),t._v(" "),o("h3",{attrs:{id:"mount"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mount"}},[t._v("#")]),t._v(" Mount")]),t._v(" "),o("blockquote",[o("p",[t._v("判斷 DOM 有沒有準備好，把在記憶體算好的東西取代原本的 el，掛載到畫面上")])]),t._v(" "),o("ul",[o("li",[t._v('Has "el" option?\n'),o("ul",[o("li",[t._v("無：到旁邊等著")]),t._v(" "),o("li",[t._v("有：繼續往下判斷")])])]),t._v(" "),o("li",[t._v('Has "template" option? (for component)\n'),o("ul",[o("li",[t._v("無：使用 el 這個外層掛載。")]),t._v(" "),o("li",[t._v("有：渲染 template。")]),t._v(" "),o("li",[t._v("Hook: beforeMount")]),t._v(" "),o("li",[t._v("到這裡會停下來，直到裡面的東西都產完，才會到 mounted 。")])])]),t._v(" "),o("li",[t._v("Create "),o("code",[t._v("vm.$el")]),t._v(' and replace "el" with it\n'),o("ul",[o("li",[t._v("Hook: mounted")]),t._v(" "),o("li",[t._v("把在記憶體運算的內容取代 el")]),t._v(" "),o("li",[t._v("資料掛載到 DOM 上面。")]),t._v(" "),o("li",[t._v("所有要產生的內容都完成了，才會到這個階段")])])])]),t._v(" "),o("h3",{attrs:{id:"update"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#update"}},[t._v("#")]),t._v(" Update")]),t._v(" "),o("blockquote",[o("p",[t._v("時常會發生的循環階段")])]),t._v(" "),o("ul",[o("li",[t._v("When data changes\n"),o("ul",[o("li",[t._v("Hook: beforeUpdate")])])]),t._v(" "),o("li",[t._v("Virtual DOM re-render and patch\n"),o("ul",[o("li",[t._v("Hook: updated")])])])]),t._v(" "),o("h3",{attrs:{id:"destory"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#destory"}},[t._v("#")]),t._v(" Destory")]),t._v(" "),o("ul",[o("li",[t._v("When "),o("code",[t._v("vm.$destory()")]),t._v(" is called\n"),o("ul",[o("li",[t._v("Hook: beforeDestory")]),t._v(" "),o("li",[t._v("是這整個實體的生命週期最後可以操作 "),o("code",[t._v("this")]),t._v(" 和其他資料、動作的位置。")]),t._v(" "),o("li",[t._v("例如可以在這個階段解除計時器、事件的監聽等等。")])])]),t._v(" "),o("li",[t._v("Teardown whaters, child components and event listeners\n"),o("ul",[o("li",[t._v("Hook: destoryed")])])])]),t._v(" "),o("h2",{attrs:{id:"範例"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#範例"}},[t._v("#")]),t._v(" 範例")]),t._v(" "),o("h3",{attrs:{id:"情境一-網頁初次載入"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#情境一-網頁初次載入"}},[t._v("#")]),t._v(" 情境一：網頁初次載入")]),t._v(" "),o("p",[t._v("Vue 的實體生命週期，最外層進行到 "),o("code",[t._v("beforeMount")]),t._v(" 的時候，會等到裡面的所有 component 都產生完，才進入到 "),o("code",[t._v("mounted")]),t._v(" 。")]),t._v(" "),o("p",[o("img",{attrs:{src:"https://i.imgur.com/BvEHXfX.png",alt:""}})]),t._v(" "),o("h3",{attrs:{id:"情境二-增加一個新的-component"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#情境二-增加一個新的-component"}},[t._v("#")]),t._v(" 情境二：增加一個新的 component")]),t._v(" "),o("p",[t._v("外層新增一個 component 的時候，對外層而言是更新，所以會有 "),o("code",[t._v("beforeUpdate")]),t._v(" 和 "),o("code",[t._v("updated")]),t._v(" 兩個 hook 。但對這個被新增的 component 而言，則會在這兩個 hook 之間經歷 create 和 mount 這兩個階段。")]),t._v(" "),o("p",[o("img",{attrs:{src:"https://i.imgur.com/o4ADxCz.png",alt:""}})]),t._v(" "),o("h3",{attrs:{id:"情境三-更新-component-裡面的資料"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#情境三-更新-component-裡面的資料"}},[t._v("#")]),t._v(" 情境三：更新 component 裡面的資料")]),t._v(" "),o("p",[t._v("點擊 component 的加號時，裡面的數字會加一，因此 component 會經歷 "),o("code",[t._v("beforeUpdate")]),t._v(" 和 "),o("code",[t._v("updated")]),t._v(" 。至於外層無異動，故無影響。")]),t._v(" "),o("p",[o("img",{attrs:{src:"https://i.imgur.com/zk6nLPl.png",alt:""}})]),t._v(" "),o("h3",{attrs:{id:"情境四-移除網頁上的-component"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#情境四-移除網頁上的-component"}},[t._v("#")]),t._v(" 情境四：移除網頁上的 component")]),t._v(" "),o("p",[t._v("有兩種觸發方式：")]),t._v(" "),o("h4",{attrs:{id:"_1-把資料刪掉"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_1-把資料刪掉"}},[t._v("#")]),t._v(" 1. 把資料刪掉")]),t._v(" "),o("p",[t._v("資料刪掉後，component 也會跟著移除。外層則會更新。\n"),o("img",{attrs:{src:"https://i.imgur.com/226xTmH.png",alt:""}})]),t._v(" "),o("h4",{attrs:{id:"_2-修改資料消滅-component"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改資料消滅-component"}},[t._v("#")]),t._v(" 2. 修改資料消滅 component")]),t._v(" "),o("p",[t._v('使用 "Self Destory" 按鈕讓 '),o("code",[t._v("destoryed")]),t._v(" 為 "),o("code",[t._v("true")]),t._v(" 來消滅 component。因此 component 會經歷 update 和 destory 兩個階段。\n"),o("img",{attrs:{src:"https://i.imgur.com/8B2bIHe.png",alt:""}})]),t._v(" "),o("p",[t._v("如果重新整理 Vue.js devtools ，會發現 Vue 的資料裡面沒有 component ，但畫面上仍存在。此時畫面上的 component 已經無法再觸發事件。\n"),o("img",{attrs:{src:"https://i.imgur.com/3w1ZTAp.png",alt:""}})]),t._v(" "),o("p",[t._v("這樣的情況下，如果要移除畫面上的 component，只要找到裡面的資料進行移除就好。但是，因為 component 早就被移掉了，所以只會是外層進行更新。\n"),o("img",{attrs:{src:"https://i.imgur.com/OLx8oyM.png",alt:""}})]),t._v(" "),o("blockquote",[o("p",[t._v("建議使用資料驅動畫面，避免像這樣手動刪掉 component，以保持資料跟畫面的連貫。")])])])}),[],!1,null,null,null);e.default=_.exports}}]);